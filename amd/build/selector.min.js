/**
 * JavaScript for child selector and zoom filter in Custom Dashboard block.
 *
 * @module     block_customdashboard/selector
 * @copyright  2026
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("block_customdashboard/selector",["jquery"],(function($){return{init:function(){function filterZoomClasses(filter){const now=Math.floor(Date.now()/1e3),todayStart=new Date;todayStart.setHours(0,0,0,0);const todayStartTimestamp=Math.floor(todayStart.getTime()/1e3),todayEnd=new Date;todayEnd.setHours(23,59,59,999);const todayEndTimestamp=Math.floor(todayEnd.getTime()/1e3),$items=$(".zoom-class-item");let visibleCount=0;$items.each((function(){const $item=$(this),timestamp=parseInt($item.data("timestamp"),10);let show=!1;"today"===filter?show=timestamp>=todayStartTimestamp&&timestamp<=todayEndTimestamp:"upcoming"===filter&&(show=timestamp>=now),show?($item.show(),visibleCount++):$item.hide()}));const $container=$("#zoom-classes-container"),$noClassesMsg=$container.find(".no-zoom-classes-message");0===visibleCount?(0===$noClassesMsg.length&&$container.find(".list-group").after('<p class="text-muted no-zoom-classes-message">No zoom classes found.</p>'),$container.find(".list-group").hide()):($noClassesMsg.remove(),$container.find(".list-group").show())}if($("#child-selector").on("change",(function(){const selectedChildId=$(this).val(),currentUrl=new URL(window.location.href);currentUrl.searchParams.set("selectedchild",selectedChildId),window.location.href=currentUrl.toString()})),$("#view-child-profile").on("click",(function(e){e.preventDefault();const selectedChildId=$("#child-selector").val();if(selectedChildId){const profileUrl=M.cfg.wwwroot+"/user/profile.php?id="+selectedChildId;window.open(profileUrl,"_blank")}})),$("#zoom-filter").on("change",(function(){filterZoomClasses($(this).val())})),$("#zoom-filter").length>0){filterZoomClasses($("#zoom-filter").val())}}}}));

//# sourceMappingURL=selector.min.js.map